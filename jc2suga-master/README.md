# jc2suga
jc2の課題用
一応JC2のリポジトリをそのままgithubで共有しているだけなんで、自由にコミットとかしてもらえればと思います。
社内ではgitではなく、subversionを使っています。
よろしく

# 実装要件などの説明
---------------------------------------------------
JOB-CUBE2は求人のパッケージですが、
サイトマップページを生成する機能がありません。
登録した求人・企業・等ページのサイトマップを生成する機能を作成してください。
勝連さんが作ったサイトマップ機能があるので、それを参考にしてみてください。

まずは、JOB-CUBE2がどのようなパッケージか把握することから始めましょう！

※ 参考のモジュールは以下フォルダに入れておきました。
./sitemap_module/

ちなみに上記の参考モジュールは
SitemapLogic::create()
によりサイトマップを生成します。

---------------------------------------------------

以下は、サイトマップモジュールの実装要件となります。

・以下のページURLのサイトマップを生成します。
  会員登録ページ
  ログインページ
  オススメの求人ページ
  地図から探すページ
  インタビュー検索ページ
  インタビュー詳細ページ
  企業検索ページ
  企業詳細ページ
  お知らせページ
  よくある質問ページ
  求人検索（新卒・中途両方）
  求人詳細（新卒・中途両方）

※ 他にもサイトマップに追加すべきページがあると思った場合は
一度相談してください。

・参考のサイトマップ機能は、求人登録等の処理の度に生成処理を行いますが、
それだと大量の求人や企業情報があった場合に、処理が重くなってしまうんで、
クロンによる定期処理でサイトマップを生成するようにしてください。

※ クロンについてはcron.phpから呼び出すのですが、
ちょっと分かりにくい部分があるので質問してください。

・サイトマップにはURL件数、ファイル容量の上限があり、
上限を超える場合はファイルを分割する必要があります。
参考のサイトマップモジュールでは分割に対応していないので分割に対応しておいてください。

[分割参考]
https://support.google.com/webmasters/answer/183668?hl=ja&topic=8476&ctx=topic


## JC２環境
動作環境
php ver5.6 ～ 7.2以下
mysql ver 5.7まで

./custom/exntends/sqlConf.phpにて初期モードがSQLiteモードになっているので
MySQLモードに変更しないと利用できないかもしれません。

## 追加の仕様 2019/06/04
 ---------------------------------
サイトマップを各データごとで出力できるようにしたいので、以下のような仕様にする。    

・サイトマップを、求人や企業などの各データごとに分割して子サイトマップとする。  
・子サイトマップは、親サイトマップからアクセスできるようにする。  
・子サイトマップは、現在のサイトマップと同じように、容量のリミットが来たら分割するようにする。  
・ログインページや会員登録ページについては、1ページしかないので親サイトマップに直接記述してもいいかもしれません。  
もしくは、ログインや会員登録ページを一つの子サイトマップに書き出して、親サイトマップからアクセスできるようにするとか。  
（この辺は菅さんの判断にお任せします）  
